---
slug: /security
title: Security Enhancements
---

import Image from '@theme/IdealImage';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Security Improvements

Security improvements for TAPPER.

## SSH with public-key authentication only

This allows for a safer and faster SSH login.

### Procedure

1. During the preparation of your Raspberry Pi with the Raspberry Pi Imager, during [OS Customization](https://www.raspberrypi.com/documentation/computers/getting-started.html#advanced-options) when setting up SSH click **Allow public-key authentication only**.

1. You will see a prompt for your public SSH key, if you have one paste it here, if you don't, continue.

1. To generate an SSH key-pair, open your terminal (use Git Bash on Windows) and enter `ssh-keygen -t ed25519 -C "your@email.com"`, don't forget to replace the email with your actual address.

1. The tool will prompt you for a location to store your key, use the default (press Enter).

1. The tool will prompt you for a passphrase to use for encryption of the key, enter a secure passphrase.

  :::tip

    You can use the [**Bitwarden passphrase generator**](https://bitwarden.com/password-generator/#password-generator).
          1. Select Passphrase in type.
          2. You can click generate a few times for a more memorable Passphrase, however it is recommended to do 6 at most.
                  - You can write the generated passphrases down and then choose the most memorable one.
  
  :::

1. The tool will prompt you for the passphrase again for verification, enter the same passphrase.

1. Copy the content of the SSH public key file and paste it into the **Set authorized_keys for 'username':** field.

   1. Execute `cat $HOME/.ssh/id_ed25519.pub` in your terminal (use Git Bash on Windows).

   1. Copy the output of the previous command into your clipboard.

   2. Paste it into the **Set authorized_keys for 'username':** field in Raspberry Pi Imager. 


## MQTT with TLS

MQTT can work using TLS. This is recommended as it prevents eavesdropping and unauthorized requests. 

### Procedure

The entire TLS Setup is described in [MQTT TLS Setup](tls-setup).

## WiFi passphrase as a hash instead of clear text

Wifi passphrase in the config file can be the hash generated by `wpa_psk`.

### Procedure

- In your terminal, type `wpa_passphrase <SSID> <PASSPHRASE>`
  - Example:
  ```bash
  $ wpa_passphrase "ExampleSSID" "ExamplePassphrase"
  network={
          ssid="ExampleSSID"
          #psk="ExamplePassphrase"
          psk=e8aecc0d08936c19af0f377de39a2412c5025fce8d8140b122c33dc346ae3b10
  }
  ```
- Copy the `psk` and put it into your config:
  - Example:
  ```yaml
  wifi:
    network: "ExampleSSID"
    passphrase: "e8aecc0d08936c19af0f377de39a2412c5025fce8d8140b122c33dc346ae3b10"
  ...
  ``` 
  